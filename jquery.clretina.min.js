var clRetinaValidUrls=[];var clRetinaInvalidUrls=[];(function(e){e.fn.clretina=function(t){function i(e,t){var n="";var r="";var i="";r=e.substr(e.lastIndexOf("/")+1).replace(/.[^.]+$/,"");i=e.replace(/^.*\./,"");n=e.replace(r+"."+i,"");if(t.subFolder.length>0)n=n+t.subFolder+"/";return n+r+t.suffix+"."+i}function s(e,t){var n=!t.checkExists;if(t.checkExists){if(clRetinaValidUrls.indexOf(e)>-1){n=true}else{if(clRetinaInvalidUrls.indexOf(e)>-1){n=false}else{jQuery.ajax(e,{type:"HEAD",async:false}).done(function(t,r,i){if(i.getResponseHeader("Content-Type").match("^image/")){clRetinaValidUrls.push(e);n=true}}).fail(function(){clRetinaInvalidUrls.push(e);n=false})}}}return n}function o(t,n,r){if(t.is("img")){if(t.attr("data-clretina")==undefined){var u=t.attr("src");if(u!=undefined){var a=i(u,r);if(a!=u){if(s(a,r)){if(r.imageTagsRetinaRatio){if(t.attr("data-retinaratio")==undefined||t.attr("data-retinaratio")==true){if(t.attr("width")==undefined)t.attr("width",t.width());if(t.attr("height")==undefined)t.attr("height",t.height())}}t.attr("src",a);t.attr("data-clretina","set")}}}}}var f=t.css("background-image");if(f!=undefined){if(f!="none"){if(f.match("^url")){if(t.attr("data-clretina")==undefined){f=f.replace('url("',"").replace('")',"");var l=t.css("background-position");var c=i(f,r);if(c!=f){if(s(c,r)){t.css("background-image","url("+c+")");t.attr("data-clretina","set");if(r.cssBackgroundsRetinaRatio){if(t.attr("data-retinaratio")==undefined||t.attr("data-retinaratio")==true){var h=new Image;h.src=f;t.css("background-size",h.width+"px "+h.height+"px");h=null}}}}}}}}if(t.children().length>0){t.children().each(function(){return o(e(this),n,r)})}else{return t}}var n=false;var r={suffix:"@2x",subFolder:"retina",checkExists:true,imageTags:true,imageTagsRetinaRatio:true,cssBackgrounds:true,cssBackgroundsRetinaRatio:true};if(t){jQuery.extend(r,t)}if(window.devicePixelRatio>=1.2){n=true}n=true;if(n){return o(e(this),n,r)}else{return this}}})(jQuery)